!function(e){var t=new Date;t=moment(t).format("MM/DD/YYYY");var a=moment(t).add(30,"day").format("MM/DD/YYYY");e.getJSON(widget_json,function(t){e.each(t.events,function(t,a){var n=a.title,r=a.description;r=r.replace(/(<([^>]+)>)/gi,"");var s,i,o=a.location.name,d=a.id,l=a.start,m=moment(l).format("YYYY-MM-DD"),v=moment(l).format("MMMM"),g=moment(l).format("YYYY"),f=moment(l).format("dddd"),h=moment(l).format("D"),p=moment(l).format("h"),u=moment(l).format("mm"),Y=moment(l).format("a"),y=a.end,w=moment(y).format("h"),M=moment(y).format("mm"),x=moment(y).format("a"),D=eventURL+d+"&d="+m,_=(a.featured_image,a.category);if(e.each(_,function(e,t){c=t.name.replace(/\s+/g,"-").replace(/&/g,"").replace("--","-"),i=(i+=c+" ").replace("undefined",""),s=(s+="<span>"+t.name+"</span>").replace("undefined","")}),""!=o)var A='<div class="event-location"><strong>Location:</strong> '+o+"</div>";else A="";if(""!=r)var L='<div class="event-description">'+r+"</div>";else L="";e("ul.calendar-events").append('<li class="calendar-event '+i+'" data-id="'+d+'"><div class="calendar-event__details-wrapper"><div class="event-title">'+n+'</div><div class="event-categories">Tags: '+s+'</div><div class="event-date">'+f+", "+v+" "+h+", "+g+'</div><div class="event-time"><i class="fa fa-clock-o" aria-hidden="true"></i><span class="start">'+p+":"+u+" "+Y+'</span> - <span class="end">'+w+":"+M+" "+x+"</span></div>"+A+L+'<a href="'+D+'" class="event-btn btn">Read More <i class="fa fa-angle-right" aria-hidden="true"></i></a></div></li>'),e(".event-description").each(function(){e(this).text().length>200&&e(this).text(e(this).text().substring(0,150).split(" ").slice(0,-1).join(" ")+" ...")})}),"All"!=current_tag&&(e(".calendar-event."+current_tag).length?(e(".calendar-event").hide(),e(".calendar-event."+current_tag).show()):(e(".calendar-event").show(),e(".selected-category").text("ALL")))}),e(".events--date-range").append('<span class="today">'+t+'</span> - <span class="fortnight">'+a+"</span>"),e(".tag-filter__widget").on("change",function(){e(".error-message").empty().hide();var t=e(this).val(),a=e(this).find("option:selected").text();0==e("."+t).length&&"All"!=t?(e(".calendar-event").hide(),e(".error-message").append("<strong>No events were found with the tag <i>"+a+'</i>.</strong><div class="error-close"><i class="fa fa-times" aria-hidden="true"></i></div>').slideDown(),e(".current-category .selected-category").text(a)):(e(".calendar-event").hide(),e(".calendar-event."+t).show(),e(".current-category .selected-category").text(a)),"All"==t&&(e(".calendar-event").show(),e(".current-category .selected-category").text("All"))}),e(".error-message").on("click",".error-close",function(){e(".error-message").empty().hide(),e(".calendar-event").show(),e(".current-category .selected-category").text("All")})}(jQuery);