!function(e){var t=function(e){var t,a,n=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<n.length;a++)if((t=n[a].split("="))[0]===e)return void 0===t[1]||t[1]};e(".calendar-show").on("click",function(){e(".controls__wrapper").slideToggle(400).toggleClass("opened");var t=e(".controls__wrapper").hasClass("opened")?"Hide Calendar":"Display Calendar";e(".controls__wrapper").hasClass("opened");e(".calendar-show").find("span").text(t),e(".calendar-show i.fa-angle-down, .calendar-show i.fa-angle-up").toggleClass("hidden")});var a,n=t("id"),s=t("d"),o=s=void 0!==s&&null!=s?moment(s).format("YYYY-MM-DD"):moment().format("YYYY-MM-DD"),r=(moment(o).format("MMM"),moment(o).format("YYYY"),moment(o).format("DD"),[]);function d(t){var a=moment(t).subtract(1,"day").format("YYYY-MM-DD"),n=moment(t).add(1,"day").format("YYYY-MM-DD");e(".btn.yesterday").attr("data-date",a),e(".btn.tomorrow").attr("data-date",n)}function l(t){var a=[];return e.each(t,function(t,n){-1==e.inArray(n,a)&&a.push(n)}),a}function m(t){e(t).each(function(){0==e(this).find('input[type="checkbox"]:checked').length&&(e(".month-events__wrapper .events .event").show(),e(".month-events__wrapper").show())})}function v(t){e(document).ready(function(){setTimeout(function(){e(t).each(function(){var t=e(this).find('input[name="tag"]'),a=t.attr("data-filter");t.attr("disabled","disabled"),e(".event").length&&(e(".event").hasClass(a)||"all"==a)&&t.removeAttr("disabled")})},1e3)})}function p(){e("#events-list__wrapper, #date-display__wrapper, #single-event__wrapper").hide().empty()}function f(t,a){switch(a){case!1:t=moment(t).format("MMMM YYYY");break;case!0:t=moment(t).format("dddd, MMMM DD, YYYY")}setTimeout(function(){return e("#events-list__wrapper").append('<h2 class="no-events">No events scheduled for '+t+"</h2>").slideDown(400),!1},400)}function h(t,a){var n;n="undefined"!=t.image&&""!=t.image?'<div class="img"><img src="'+t.image+'" alt="'+t.title+'" /></div>':"",setTimeout(function(){var a="",i="";if(e.each(t.category,function(e,n){t.category.length&&(c=n.name.replace(/\s+/g,"-"),c=c.replace("'","").replace("-&-","-"),a+=c+" ",i+="<span>"+n.name+"</span>")}),void 0!==(g=t.location.name)&&""!=g)var s='<div class="event-location"><strong>Location:</strong> '+g+"</div>";else s="";var o,r=t.start,d=(moment(r).format("MMMM"),moment(r).format("YYYY"),moment(r).format("dddd"),moment(r).format("D"),moment(r).format("h")),l=moment(r).format("mm"),m=moment(r).format("a"),v=t.end,p=moment(v).format("h"),f=moment(v).format("mm"),h=moment(v).format("a"),g=(t.featured_image,t.category,t.location.name);o=t.description.length>=200?t.description.substring(0,250).split(" ").slice(0,-1).join(" ")+" ...":t.description,e("#events-list__wrapper").append('<div class="event '+a+'"><h2>'+t.title+'</h2><div class="tags"><span><strong>Tags:</strong> </span>'+i+'</div><div class="event-time"><i class="fa fa-clock-o" aria-hidden="true"></i><span class="start">'+d+":"+l+" "+m+'</span> - <span class="end">'+p+":"+f+" "+h+"</span></div>"+s+'<div class="description">'+o+"</div>"+n+'<div class="event-details__button btn" data-id="'+t.id+'"><a href="'+site_url+t.id+"&d="+t.date+'">Details <i class="fa fa-angle-right"></i></a></div></div>').slideDown(400)},400)}function g(t,a){p(),e("#date-display__wrapper").empty(),setTimeout(function(){e("#date-display__wrapper").append('<div class="month">'+t+'</div><div class="day">'+a+"</div>").fadeIn(400)},400)}e(".tag-filter, .selected-tags__wrap").hide(),e(".tag-filter__label").on("click",function(){e(".tag-filter").slideToggle(400),e(this).toggleClass("expanded")}),a=".tag-filter",e.each(tags_json,function(t,n){var i=n.tag.replace(/\s+/g,"-");i=i.replace("'","").replace("&","").replace("--","-"),e(a).append('<div class="tag-control"><label class="control"><input type="checkbox" name="tag" id="tag_'+t+'" class="tag_select" data-filter="'+i+'"><div class="tag-control__label btn tag-btn">'+n.tag+"</div></label></div>")}),e.getJSON(cal_json,function(t){e.each(t.events,function(e,t){var a=t.start,n=moment(a).format("YYYY-MM-DD"),i=(moment(a).format("MMMM"),moment(a).format("YYYY"),moment(a).format("dddd"),moment(a).format("D"),moment(a).format("h")),s=moment(a).format("mm"),o=moment(a).format("a"),d=t.end,l=moment(d).format("h"),c=moment(d).format("mm"),m=moment(d).format("a"),v=t.category,p=t.location.name,f=t.description;f=f.replace(/(<([^>]+)>)/gi,""),r.push({id:t.id,title:t.title,date:n,allday:t.allday,start:t.start,end:t.end,startTime:i+":"+s+" "+o,endTime:l+":"+c+" "+m,category:v,description:f,image:t.featured_image,future_dates:t.future_dates,location:p,presenter:t.presenter,registration:t.registration,seats:t.seats,seats_taken:t.seats_taken,url:t.url.public,waitlist:t.wait_list})});var a=e("#calendar").clndr({startWithMonth:o,classes:{past:"past",today:"today",event:"has-events",selected:"selected",inactive:"inactive",lastMonth:"last-month",nextMonth:"next-month",adjacentMonth:"adjacent-month"},dateParameter:"date",events:r,adjacentDaysChangeMonth:!1,clickEvents:{click:function(t){var a=t.date._i,n=moment(a).format("D"),i=moment(a).format("MMM");moment(a).format("MMMM");g(i,n),d(a),e(".tag-filter__label").hide(),t.events.length?(e(".day-btns").show(),e.each(t.events,function(t,a){a.startTime;a.allday,h(a),v(".control"),e(".tag-filter").addClass("hidden"),e(".tag-filter__label").removeClass("expanded")})):f(a,!0),e(".controls__wrapper").removeClass("visible")},onMonthChange:function(t){e(".day-btns").hide(),e(".tag-filter__label").show();var n=t._d,i=[],s=a.eventsThisInterval;selectedMonth=moment(n).format("YYYY-MM"),displayMonth=moment(n).format("MMM"),p(),s.length?(e.each(s,function(e,a){var n=a.date;n=moment(n).format("YYYY-MM"),t=moment(n).format("MM"),eventDays=moment(a.date).format("DD"),i.push(eventDays),i=l(i)}),e.each(i,function(t,a){e("#events-list__wrapper").append('<div class="month-events__wrapper" data-day="'+a+'" data-month="'+selectedMonth+'"><div class="date-display__wrapper"><div class="month">'+displayMonth+'</div><div class="day">'+a+'</div></div><div class="events"></div></div>'),e.each(s,function(t,n){var i=n.date;if(i=moment(i).format("YYYY-MM"),eventDay=moment(n.date).format("DD"),eventDay==a&&i==selectedMonth){var s=n.startTime+" - "+n.endTime;1==n.allday&&(s="All day event"),setTimeout(function(){var t;t="undefined"!=n.image&&""!=n.image?'<div class="img"><img src="'+n.image+'" alt="'+n.title+'" /></div>':"";var i="",o="";e.each(n.category,function(e,t){c=t.name.replace(/\s+/g,"-"),c=c.replace("'","").replace("-&-","-"),i+=c+" ",o+="<span>"+t.name+"</span>"});var r,d=n.location.name;if(r=n.description.length>=200?n.description.substring(0,250).split(" ").slice(0,-1).join(" ")+" ...":n.description,void 0!==d&&""!=d)var l='<div class="event-location"><strong>Location:</strong> '+d+"</div>";else l="";e('.month-events__wrapper[data-day="'+a+'"] .events').append('<div class="event '+i+'"><h2>'+n.title+'</h2><div class="tags"><span><strong>Tags:</strong> </span>'+o.replace("undefined","")+'</div><div class="start-time"><i class="fa fa-clock-o"></i>'+s+"</div>"+l+'<div class="description">'+r+"</div>"+t+'<div class="event-details__button btn" data-id="'+n.id+'"><a href="'+site_url+n.id+"&d="+n.date+'">Details <i class="fa fa-angle-right"></a></i></div></div>')},400)}})}),e("#events-list__wrapper").slideDown(400),v(".control"),e(".tag-filter").addClass("hidden"),e(".tag-filter__label").removeClass("expanded")):f(n,!1),e(".controls__wrapper").removeClass("visible")}},ready:function(){if(void 0!==n&&null!=n&&void 0!==s&&null!=s)e("#events-list__wrapper, #date-display__wrapper").hide(),function(t,a){p(),d(a),e(".tag-filter__label").hide(),e(".day-btns").hide(),e.getJSON(cal_json,function(a){e.each(a.events,function(a,n){var i=n.id;if(t=parseInt(t),i==t){var s=moment(n.date).format("MMMM DD YYYY");o=s;var r=n.presenter;""!=r?'<div class="presenter">'+n.presenter+"</div>":"";var d=n.registration,l=n.seats,c=n.seats_taken,m=l-c+" seats available.";m<=0&&(m="This event is currently full."),d=1==d?'<div class="registration_required">Registration is required for this event</div><div class="btn reg-button"><a href="'+n.url.public+'" target="_blank">Register for this event<i class="fa fa-angle-right"></i></a></div>':"";var v=n.featured_image;v=void 0!==v&&""!=v?'<div class="img"><img src="'+v+'" alt="'+n.title+'" /></div>':"";n.startTime;1==n.allday&&"All day event";var s=n.start,p=moment(s).format("MMMM"),f=moment(s).format("YYYY"),h=moment(s).format("dddd"),g=moment(s).format("D"),_=moment(s).format("h"),u=moment(s).format("mm"),M=moment(s).format("a"),Y=n.end,w=moment(Y).format("h"),y=moment(Y).format("mm"),D=moment(Y).format("a"),b=(n.featured_image,n.category,n.location.name),k=n.url.public,T="https://www.facebook.com/sharer/sharer.php?u="+encodeURI(k),C='http://twitter.com/home?status=Check Out:"'+n.title+'"  '+k;if(""!=b)var x='<div class="event-location"><strong>Location:</strong> '+b+"</div>";else x="";setTimeout(function(){e("#single-event__wrapper").append('<div class="event-details"><h2 class="event-title">'+n.title+'</h2><div class="share_event"><span>Share this event: </span><span class="icon facebook" title="Share on Facebook"><a href="'+T+'" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a></span><span class="icon twitter" title="Share on Twitter"><a href="'+encodeURI(C)+'" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></span></div><div class="event_date">'+h+", "+p+" "+g+", "+f+'</div><div class="event-time"><i class="fa fa-clock-o" aria-hidden="true"></i><span class="start">'+_+":"+u+" "+M+'</span> - <span class="end">'+w+":"+y+" "+D+"</span></div>"+x+v+'<div class="description">'+n.description+"</div>"+d+"</div>")},400)}})}),e("#single-event__wrapper").slideDown(400)}(n,s);else{e("#date-display__wrapper").hide(),e(".tag-filter__label").show(),e(".day-btns").hide();var t=this.eventsThisInterval,a=[];e.each(t,function(e,t){var n=moment(t.date).format("YYYY-MM-DD");if(selectedMonth=moment(n).format("YYYY-MM"),displayMonth=moment(n).format("MMM"),n>=o){var i=t.date;i=moment(i).format("YYYY-MM"),moment(i).format("MM"),eventDays=moment(t.date).format("DD"),a.push(eventDays),a=l(a)}}),e.each(a,function(a,n){e("#events-list__wrapper").append('<div class="month-events__wrapper" data-day="'+n+'" data-month="'+selectedMonth+'"><div class="date-display__wrapper"><div class="month">'+displayMonth+'</div><div class="day">'+n+'</div></div><div class="events"></div></div>'),e.each(t,function(t,a){var i=a.date;if(i=moment(i).format("YYYY-MM"),eventDay=moment(a.date).format("DD"),eventDay==n&&i==selectedMonth){var s=a.startTime+" - "+a.endTime;1==a.allday&&(s="All day event"),setTimeout(function(){var t;t="undefined"!=a.image&&""!=a.image?'<div class="img"><img src="'+a.image+'" alt="'+a.title+'" /></div>':"";var i="",o="";e.each(a.category,function(e,t){c=t.name.replace(/\s+/g,"-"),c=c.replace("'","").replace("-&-","-"),i+=c+" ",o+="<span>"+t.name+"</span>"});var r,d=a.location;if(r=a.description.length>=200?a.description.substring(0,250).split(" ").slice(0,-1).join(" ")+" ...":a.description,void 0!==d&&""!=d)var l='<div class="event-location"><strong>Location:</strong> '+d+"</div>";else l="";e('.month-events__wrapper[data-day="'+n+'"] .events').append('<div class="event '+i+'"><h2>'+a.title+'</h2><div class="tags"><span><strong>Tags:</strong> </span>'+o.replace("undefined","")+'</div><div class="start-time"><i class="fa fa-clock-o"></i>'+s+"</div>"+l+'<div class="description">'+r+"</div>"+t+'<div class="event-details__button btn" data-id="'+a.id+'"><a href="'+site_url+a.id+"&d="+a.date+'">Details <i class="fa fa-angle-right"></i></a></div></div>')},400)}})}),e("#events-list__wrapper").slideDown(400),v(".control"),e(".tag-filter").addClass("hidden"),e(".tag-filter__label").removeClass("expanded")}}});e(".btn.tomorrow, .btn.yesterday").on("click",function(){var t=e(this).attr("data-date"),n=[],i=[a.eventsLastMonth,a.eventsThisInterval,a.eventsNextMonth],s=[].concat.apply([],i),o=moment(t).format("MMM"),r=moment(t).format("DD");e.each(s,function(e,a){t==a.date&&n.push(a.date)}),n.length<=0&&(g(o,r),f(t,!0)),n.length&&(e.each(s,function(a,n){eventDate=n.date,t==eventDate&&function(t,a){e(".tag-filter__label, .tag-filter, .selected-tags__wrap").hide(),e(".day-btns").show(),eventDate=a.start;moment(eventDate).format("MMMM"),moment(eventDate).format("MMM"),moment(eventDate).format("YYYY"),moment(eventDate).format("dddd"),moment(eventDate).format("D");var n=moment(eventDate).format("h"),i=moment(eventDate).format("mm"),s=moment(eventDate).format("a"),o=a.end,r=moment(o).format("h"),d=moment(o).format("mm"),l=moment(o).format("a"),m=(a.featured_image,a.category,a.location.name);if(m=a.location.name,m)var p='<div class="event-location"><strong>Location:</strong> '+m+"</div>";else p="";setTimeout(function(){var t="",o="";e.each(a.category,function(e,a){c=a.name.replace(/\s+/g,"-"),c=c.replace("'",""),t+=c+" ",o+="<span>"+a.name+"</span>"});var m,v=a.featured_image;v=void 0!==v&&""!=v?'<div class="img"><img src="'+v+'" alt="'+a.title+'" /></div>':"",m=a.description.length>=200?a.description.substring(0,250).split(" ").slice(0,-1).join(" ")+" ...":a.description,e("#events-list__wrapper").append('<div class="event '+t+'"><h2>'+a.title+'</h2><div class="tags"><span><strong>Tags:</strong> </span>'+o+'</div><div class="event-time"><i class="fa fa-clock-o" aria-hidden="true"></i><span class="start">'+n+":"+i+" "+s+'</span> - <span class="end">'+r+":"+d+" "+l+"</span></div>"+p+'<div class="description">'+m+"</div>"+v+'<div class="event-details__button btn" data-id="'+a.id+'"><a href="'+site_url+a.id+"&d="+a.date+'">Details <i class="fa fa-angle-right"></i></a></div></div>').slideDown(400)},400),v(".control"),e(".tag-filter").addClass("hidden"),e(".tag-filter__label").removeClass("expanded")}(0,n)}),g(o,r)),d(t)})}),e(document).ready(function(){v(".control"),e(".control").each(function(){e(this).find('input[name="tag"]').on("change",function(){m(".tag-filter");var t=this.checked?"yes":"no",a=e(this).attr("data-filter"),n=e(this).attr("data-filter").replace(/-/g," ");"yes"==t&&e(".selected-tags__wrap").show().append('<span class="'+a+' selected-tag">'+n+"</span>"),"no"==t&&e(".selected-tags__wrap").find("."+a).remove(),e(".selected-tags__wrap span").length||e(".selected-tags__wrap").hide(),m(".tag-filter");var s=e(".month-events__wrapper .events"),o=e(".month-events__wrapper");o.fadeOut(),s.find(".event").hide();var r=e('input[name="tag"]:checked').map(function(){return e(this).attr("data-filter")}).get();for(i=0;i<r.length;i++)o.each(function(){e(this).find("."+r[i]).length&&(e(".month-events__wrapper .events ."+r[i]).show(),e(this).fadeIn())}),"all"==r[i]&&(e(".control").each(function(){e(this).find('input[type="checkbox"]').prop("checked","")}),s.find(".event").show(),o.fadeIn(),e(".selected-tags__wrap").hide(),e(".selected-tags__wrap .selected-tag").remove())})}),e(".toggle-filters").on("click",function(){e(".controls__wrapper").toggleClass("visible")}),e("#previous-year, #next-year").hide()})}(jQuery);